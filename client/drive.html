<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Upload</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="main.js"></script>
    <script src="azure-storage.blob.js"></script>
    <script src="azure-storage.blob.min.js"></script>

</head>
<body>
   <div>
        <input type="text" id="text" name="text" value="Hello World!" />
        <button id="upload-button" onclick="uploadBlobFromText()">Upload</button>
        <script>
                function uploadBlobFromText() {
                     // your account and SAS information
                     var sasKey ="....";
                     var blobUri = "http://<accountname>.blob.core.windows.net";
                     var blobService = AzureStorage.createBlobServiceWithSas(blobUri, sasKey).withFilter(new AzureStorage.ExponentialRetryPolicyFilter());
                     var text = document.getElementById('text');
                     var btn = document.getElementById("upload-button");
                     blobService.createBlockBlobFromText('mycontainer', 'myblob', text.value,  function(error, result, response){
                         if (error) {
                             alert('Upload filed, open browser console for more detailed info.');
                             console.log(error);
                         } else {
                             alert('Upload successfully!');
                         }
                     });
                }
        </script>
        <!-- <label for="avatar">Choose a profile picture:</label>

        <input type="file"
               id="uploadFile" name="uploadFile"
               accept="image/png, image/jpeg"
               style="margin-top: 50px;">    -->
    </div> 
   <div>
        <!-- <label>Browse</label>
        <input type='file' accept="image/*" id="fileinput"/>
        <p><button onclick="myFunction()">Upload</button></p>
        <img id="myImg" src=""/>
        <p id="demo"></p> -->
        <script>








        $(function () {
            $(":file").change(function () {
                if (this.files && this.files[0]) {
                    var reader = new FileReader();
                    reader.onload = imageIsLoaded;
                    reader.readAsDataURL(this.files[0]);
                }
            });
        });
        
        function imageIsLoaded(e) {
            $('#myImg').attr('src', e.target.result);
        };

        </script>
    </div>


</body>
</html>
